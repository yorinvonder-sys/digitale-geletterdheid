/* App-only styles loaded with AuthenticatedApp.
   Keeps public/login routes from parsing game/tablet-specific CSS. */

/* ============================================
   TABLET / IPAD OPTIMIZATIONS
   ============================================ */

/* Detect touch devices for enhanced touch targets */
@media (pointer: coarse) {
  .touch-friendly-btn {
    min-height: 48px;
    min-width: 48px;
  }

  /* Make suggestion chips larger */
  .suggestion-chip {
    padding: 0.75rem 1rem;
    font-size: 0.875rem;
  }

  /* Larger chat input on tablets */
  .chat-input {
    min-height: 52px;
    font-size: 1rem;
  }

  /* Larger game buttons and UI elements */
  .game-btn {
    min-height: 56px;
    min-width: 56px;
    font-size: 1.125rem;
  }

  /* Better touch areas for game controls */
  .game-control-area {
    min-height: 80px;
  }
}

/* iPad Pro / Large Tablets (1024px - 1366px) */
@media screen and (min-width: 1024px) and (max-width: 1366px) {
  .tablet-optimized {
    --spacing-base: 1.5rem;
  }

  /* Larger game canvas on tablets */
  .game-canvas-container {
    max-height: calc(100dvh - 120px);
  }
}

/* iPad landscape layout fix */
@media screen and (min-width: 768px) and (max-width: 1024px) and (orientation: landscape) {
  .chat-column {
    flex: 0.4;
  }

  .preview-column {
    flex: 0.6;
  }

  /* Ensure game fills available space */
  .game-fullscreen {
    height: calc(100dvh - 80px) !important;
  }
}

/* iPad portrait - stack chat on top of preview */
@media screen and (min-width: 768px) and (max-width: 1024px) and (orientation: portrait) {
  .ipad-stack {
    flex-direction: column !important;
  }

  .ipad-stack > section {
    flex: 1 1 auto !important;
    min-height: 45dvh !important;
  }

  /* Game takes more space in portrait */
  .game-fullscreen {
    height: calc(100dvh - 100px) !important;
  }
}

/* Tablet-specific game optimizations */
@media screen and (min-width: 768px) and (max-width: 1366px) {
  /* Enhanced game UI visibility */
  .game-hud {
    font-size: 1.25rem;
    padding: 1rem 1.5rem;
  }

  .game-hud-icon {
    width: 24px;
    height: 24px;
  }

  /* Larger quiz buttons for touch */
  .quiz-option-btn {
    min-height: 60px;
    font-size: 1.125rem;
    padding: 1rem 1.5rem;
  }

  /* Better spaced game overlays */
  .game-overlay {
    padding: 2rem;
  }

  .game-overlay-title {
    font-size: 2.5rem;
  }

  .game-overlay-subtitle {
    font-size: 1.25rem;
  }

  /* Bigger start button */
  .game-start-btn {
    min-height: 70px;
    font-size: 1.5rem;
    padding: 1.25rem 3rem;
  }
}

/* Fix for iOS keyboard pushing content */
@supports (-webkit-touch-callout: none) {
  .keyboard-safe {
    padding-bottom: env(safe-area-inset-bottom, 20px);
  }

  /* Prevent viewport resize when keyboard opens */
  html {
    height: 100%;
    min-height: 100%;
  }

  /* Safe area insets for notched devices */
  .safe-area-inset {
    padding-top: env(safe-area-inset-top, 0px);
    padding-bottom: env(safe-area-inset-bottom, 0px);
    padding-left: env(safe-area-inset-left, 0px);
    padding-right: env(safe-area-inset-right, 0px);
  }
}

/* Safe area utility classes */
.pt-safe {
  padding-top: env(safe-area-inset-top, 0px);
}

.pb-safe {
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

.pl-safe {
  padding-left: env(safe-area-inset-left, 0px);
}

.pr-safe {
  padding-right: env(safe-area-inset-right, 0px);
}

/* Touch action optimizations for games */
.game-touch-area {
  touch-action: manipulation;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
}

/* Prevent accidental text selection during gameplay */
.game-container {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
}

/* Fullscreen game mode for tablets */
.fullscreen-game {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 50;
  background: #0f172a;
}

/* Improved touch feedback */
@media (pointer: coarse) {
  .touch-feedback:active {
    transform: scale(0.97);
    opacity: 0.9;
  }
}

/* Tablet orientation lock hint */
.orientation-hint {
  display: none;
}

@media screen and (max-height: 500px) and (orientation: landscape) {
  .orientation-hint {
    display: flex;
    position: fixed;
    inset: 0;
    background: rgba(15, 23, 42, 0.95);
    z-index: 9999;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.25rem;
    text-align: center;
    padding: 2rem;
  }
}
